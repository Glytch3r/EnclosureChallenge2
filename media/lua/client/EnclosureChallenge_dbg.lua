--[[██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                        				 Custom  PZ  Mod  Developer  for  Hire													  |
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                       	Portfolio:  https://steamcommunity.com/id/glytch3r/myworkshopfiles/							          |
|                       		                                    														 	  |
|                       	Discord:    Glytch3r#1337 / glytch3r															      |
|                       		                                    														 	  |
|                       	Support:    https://ko-fi.com/glytch3r														    	  |
|_______________________________________________________________________________________________________________________________-]]
--[[_____________________________________________________________________________________________________________________________
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████--]]


EnclosureChallenge = EnclosureChallenge or {}
--[[
        EnclosureChallenge.resetData()
        EnclosureChallenge.dbgPts()
]]
function EnclosureChallenge.dbgPts()
    local ec = EnclosureChallenge.getData()
    ec.UnlockPoints = 300
    print(ec.UnlockPoints)
end
function EnclosureChallenge.dbgWin()

    local ec = EnclosureChallenge.getData()
    ec.RemoteTime = 0
    print(ec.RemoteTime)
end
function EnclosureChallenge.clipWhereami()
    local str = EnclosureChallenge.whereami()
    Clipboard.setClipboard(str)
    print(str)
end

function EnclosureChallenge.debugData()
    local ec = getPlayer():getModData().EnclosureChallenge
    local toClip = ""
    for k, v in pairs(ec) do
        if type(v) == "table" then
            local sub = ""
            for subk, subv in pairs(v) do
                sub = sub .. string.format("\n    %s = %s", tostring(subk), tostring(subv))
            end
            toClip = toClip .. string.format("%s = {%s\n}\n", tostring(k), sub)
        else
            toClip = toClip .. string.format("%s = %s\n", tostring(k), tostring(v))
        end
    end
    Clipboard.setClipboard(toClip)
    print(toClip)
end



--[[
EnclosureChallenge.DataPanel = ISCollapsableWindow:derive("EnclosureChallenge.DataPanel")


function EnclosureChallenge.DataPanel:initialise()
    ISCollapsableWindow.initialise(self)
end


function EnclosureChallenge.DataPanel:createChildren()
    ISCollapsableWindow.createChildren(self)

    -- Main combo box (left side)
    self.comboBox = ISComboBox:new(10, 30, 200, 20, self)
    self.comboBox:initialise()
    for i = 1, 14 do
        self.comboBox:addOption("Option " .. i)
    end
    self:addChild(self.comboBox)

    self.newComboBox = ISComboBox:new(220, 30, 150, 20, self)
    self.newComboBox:initialise()
    self.newComboBox:addOption("New Option 1")
    self.newComboBox:addOption("New Option 2")
    self:addChild(self.newComboBox)

    self.buttons = {}
    local btnW, btnH, btnX, btnY = 12, 30, 80, 25 -- x, y, w, h
    for i = 1, 6 do
        local btn = ISButton:new(btnX, btnY + ((i - 1) * (btnH + 5)), btnW, btnH, "Button " .. i, self, self.onButtonClick)
        btn.internal = "BTN" .. i
        btn:initialise()
        self:addChild(btn)
        self.buttons[i] = btn
    end

    self.listBox = ISScrollingListBox:new(10, 200, self.width - 20, self.height - 210)
    self.listBox:initialise()
    self.listBox:instantiate()
    self.listBox.itemheight = 20
    self.listBox.selected = 0
    self.listBox.drawBorder = true
    self:addChild(self.listBox)

    local challenges = EnclosureChallenge.getData() and EnclosureChallenge.getData().Challenges or nil
    print("Challenges data:", challenges)
end

function EnclosureChallenge.DataPanel:onButtonClick(button)
    print("Clicked:", button.internal)
end

function EnclosureChallenge.DataPanel:updateList(dataTab)
    self.listBox:clear()
    for _, entry in ipairs(dataTab) do
        self.listBox:addItem(tostring(entry), entry)
    end
end

function EnclosureChallenge.DataPanel:new(x, y, w, h)
    local o = ISCollapsableWindow.new(self, x, y, w, h)
    o:setResizable(true)
    o:setVisible(true)
    o.title = "Enclosure Challenge"
    o:initialise()
    o.backgroundColor = {r=0.65,g=0.2,b=0.2,a=0.4}
    return o
end

function EnclosureChallenge.DataPanel:prerender()
	local z = 20;
	local splitPoint = 100;
	local x = 10;
	self:drawRect(0, 0, self:getWidth(), self:getHeight(), self.backgroundColor.a, self.backgroundColor.r, self.backgroundColor.g, self.backgroundColor.b);
	self:drawRectBorder(0, 0, self:getWidth(), self:getHeight(), self.borderColor.a, self.borderColor.r, self.borderColor.g, self.borderColor.b);
	self:drawTextCentre("Enclosure Challenge", self:getWidth()/2,  10, 1,1,1,1, UIFont.Small);

end

function EnclosureChallenge.openPanel()
    local panel = EnclosureChallenge.DataPanel:new(100, 100, 400, 400)
    panel:initialise()
    panel:addToUIManager()
    EnclosureChallenge.DataPanel.instance = panel

    panel.comboBox.options = {}

    panel.comboIndexToReward = {}

    for i = 0, 14 do
        local title = EnclosureChallenge.getRewardTitle(i)
        if i == 0 or (title and title ~= "") then
            local label = (i == 0) and getText("Random") or tostring(title)
            panel.comboBox:addOption(label)
            table.insert(panel.comboIndexToReward, i)
        end
    end

    function panel.comboBox:onChange(option)
        local comboIndex = panel.comboBox:getSelectedIndex()
        local rewardIndex = panel.comboIndexToReward[comboIndex]

        local resTab = {}

        local title = EnclosureChallenge.getRewardTitle(rewardIndex)
        if title then
            for word in string.gmatch(title, "%S+") do
                table.insert(resTab, word)
            end
        end

        panel:updateList(resTab)
    end
end
 ]]
-----------------------            ---------------------------
